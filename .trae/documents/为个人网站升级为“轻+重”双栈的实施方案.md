## 差异分析

* 你当前站点（GitHub Pages 静态）：Next.js 构建产物被复制到根目录静态部署（.github/workflows/update-scholar-metrics.yml:49–54；.github/workflows/deploy.yml:31–37）。页面为静态导出，适合展示与 SEO。

  * 评论：通过 Giscus 前端脚本嵌入，无服务端依赖（next-site/src/app/components/sections/CommentsSection.tsx:7–23）。

  * 访问统计：前端调用 countapi.xyz，失败时本地回退（next-site/src/app/components/VisitorAnalytics.tsx:20–76）。

  * 页面内容组织：采用 Next.js App Router 组件化布局（next-site/src/app/page.tsx:24–33）。

* yage.ai：内容思想站点，强调“AI Native 成本结构”“一次性工具”的方法论。启发：将你的站点做成“轻展示 + 重交互/一次性工具”的双栈形态，既保留静态主页，又能快速上线面向具体任务的临时工具。

## 目标与原则

* 轻站：保留现有 GitHub Pages 静态站，主打快速访问、稳定展示、SEO。

* 重站：新增支持 SSR/API/数据库/鉴权的平台，承载交互组件与一次性工具。

* 成本优先：充分利用免费层（Vercel/Cloudflare、Supabase/Firebase、开源分析）。

## 技术架构（推荐）

* 轻站：继续 Next.js 静态导出 + GitHub Pages，延续现有自动化（学术指标每日更新）。

* 重站：

  * 托管：Vercel（Hobby 免费）或 Cloudflare Pages + Workers。

  * 框架：沿用 Next.js 15 App Router，开启 SSR 与 API Route。

  * 数据与鉴权：Supabase（Postgres/存储/Auth）或 Firebase。

  * 分析与监控：Vercel Analytics 或 Umami/Plausible（可自托管）。

  * 任务定时：Cloudflare Workers Cron 或继续用 GitHub Actions。

## 首批重站功能

* 数据 Diff 可视化：上传两版 JSON/CSV，服务端对齐与比对，前端支持过滤/排序/搜索，复刻“标注前后对比”场景。

* 全站检索：服务端生成文本/向量索引，前端即时搜索与高亮。

* 交互式研究演示：参数滑块 + 图表可视化，支持分享链接与配置持久化。

* 反馈表单：写入 Supabase/Firebase，含后台列表与邮件通知。

## 小红书一键导出（方案）

* 目标：输入分享链接，自动生成 PDF（图文按顺序排版、目录/页码），若含视频则抽取音频→转写→摘要，随 PDF 附带文稿；可打包 ZIP。

* 合规与风险：平台有反爬与内容条款；建议用于个人学习留存。若需登录访问，采用“临时 Cookie/Token（一次性、不落盘）”。

* 技术路线 A（无登录能访问的页）：

  1. 服务端抓取 HTML（Serverless Fetch），解析图文与顺序。
  2. 资源下载与排版模板化（headless HTML→PDF 或 pdf-lib）。
  3. 若有视频：只抓取公开流地址；若不可得，仅生成“占位 + 外链”。

* 技术路线 B（需登录/强反爬）：

  1. 无头浏览器渲染：Vercel Serverless 上使用 @sparticuz/chromium + puppeteer-core 或 Playwright on AWS Lambda；Cloudflare 可用 Browser Rendering API。
  2. 模拟横向滑页：滚动/滑动事件驱动，逐页截图或抽取 DOM。
  3. 生成 PDF：Puppeteer PDF/排版模板；图片统一分辨率与压缩。
  4. 视频：尝试下载或仅抽取音频；调用转写（OpenAI Whisper API/本地 Whisper.cpp/Vosk），再用 LLM 产出摘要与要点。

* 输出格式：

  * PDF1：图文合并（封面、目录、页码、原帖信息）。

  * PDF2（可选）：视频转写与摘要；或合并为附录。

  * ZIP：包含 PDF、原图原视频链接清单、元数据 JSON。

* 安全与隐私：

  * 用户 Cookie 只在内存使用，执行完清空；全程 HTTPS。

  * 不做长期存储；下载链接设短时有效期。

## 部署与成本

* Vercel Hobby 可覆盖多数请求；若频繁使用，配置缓存/限流。

* 转写费用：

  * 选 Whisper API（按时长计费）或自托管 Whisper.cpp（零费用但算力耗时）。

  * 可在 GitHub Actions 离线转写以节省冷启动与运行时限制。

## 里程碑

1. 新建重站仓库与部署（Vercel + Supabase），建立统一导航：轻站主页跳转“实验室/工具”。
2. 上线 MVP：小红书“无登录抓取→PDF”路线 A；数据 Diff 工具。
3. 扩展登录抓取路线 B（无头浏览器），加入视频转写与摘要。
4. 分析/监控与配额治理，加入任务队列与失败重试。

## 需要你确认的点

* 重站平台与数据层：是否采用 Vercel + Supabase 作为默认。

* 小红书抓取优先级：先做“无登录→PDF”的快速 MVP，还是直接攻克“登录 + 视频转写”。

* 转写方案：优先 Whisper API 还是自托管 Whisper.cpp。

## 补充：关于“Shirley Ho”

* “Shirley”是英文名；“Ho”常见为粤语地区“何/霍”的英语写法，也可能是越南姓“Hồ”的无声调写法；韩语里“Ho”更多作名而非常见姓。仅凭名字无法断定，但在海外语境更常见于华裔（粤语）或越南裔，韩国概率较低。

